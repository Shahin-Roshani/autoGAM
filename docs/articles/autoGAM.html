<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>autoGAM vignette • autoGAM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="autoGAM vignette">
<meta property="og:description" content="autoGAM">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">autoGAM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/autoGAM.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="autoGAM_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>autoGAM vignette</h1>
            
      
      
      <div class="hidden name"><code>autoGAM.Rmd</code></div>

    </div>

    
    
<style>
body{text-align: justify}
</style>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>In this vignette, two different examples on two different well-known datasets are proposed. The goal is to cover all different aspects of workflow based procedures included this package through these examples.</p>
<p>Basically, autoGAM has 4 functions that communicate with each other to create a workflow with the aim of evaluating different user-specified forms of included continuous predictors and find the best Generalized Additive Model (GAM). These functions are:</p>
<p><strong>1- autoGAM_frame:</strong> The base of all other procedures! Evaluates user’s specified form(s) on continuous predictor(s) and obtains the best form (among pre-specified form(s)) for each continuous predictor based on the chosen metric (AIC, AICc or BIC) values of GLM fits. This function creates the base platform for creating the final GAM adn the remaining functions are modifiers of this base platform.</p>
<p><em>Note: User can specify whether outliers should be ignored in fitting each form on predictor(s) or not. outliers in case of response are detected by <code><a href="https://rdrr.io/pkg/car/man/outlierTest.html">car::outlierTest()</a></code> which is based on studentized residuals of records and outliers in case of the predictor are determined as records that have hat-values &gt; 2p (where p is the number of parameters inside the model). If user decides to ignore outliers in evaluation process, <code>ignore.outliers</code> argument can be set to <code>TRUE</code> but when one is not sure about the presence of outliers, it’s highly recommended to leave the default value which is <code>FALSE</code> to obtain more accurate results.</em></p>
<p><strong>2- backward_select:</strong> An independent function for performing p-value based backward elimination process that also modified to simply be used on returns of class <code>autoGAM_frame</code>.</p>
<p><strong>3- autoGAM_fit:</strong> A wrapper function that obtains and adds the final and best GAM to the platform.</p>
<p><strong>4- plot:</strong> Plot method for returns of <code>autoGAM_frame</code> to automatically create plots of the evaluated forms of continuous predictors and plots related to the best forms of predictors.</p>
<p>All the mentioned procedures can be used almost back and forth but user must remember that <code><a href="../reference/autoGAM_frame.html">autoGAM_frame()</a></code> is the base that creates the base platform and other functions can be used on it in different orders.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">autoGAM</span><span class="op">)</span>
<span class="co">#&gt; Loading required package: tidyverse</span>
<span class="co">#&gt; -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</span>
<span class="co">#&gt; v ggplot2 3.3.3     v purrr   0.3.4</span>
<span class="co">#&gt; v tibble  3.1.2     v dplyr   1.0.6</span>
<span class="co">#&gt; v tidyr   1.1.3     v stringr 1.4.0</span>
<span class="co">#&gt; v readr   1.4.0     v forcats 0.5.1</span>
<span class="co">#&gt; -- Conflicts ------------------------------------------ tidyverse_conflicts() --</span>
<span class="co">#&gt; x dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span>
<span class="co">#&gt; Loading required package: magrittr</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'magrittr'</span>
<span class="co">#&gt; The following object is masked from 'package:purrr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     set_names</span>
<span class="co">#&gt; The following object is masked from 'package:tidyr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     extract</span>
<span class="co">#&gt; Loading required package: gam</span>
<span class="co">#&gt; Loading required package: splines</span>
<span class="co">#&gt; Loading required package: foreach</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'foreach'</span>
<span class="co">#&gt; The following objects are masked from 'package:purrr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     accumulate, when</span>
<span class="co">#&gt; Loaded gam 1.20</span>
<span class="co">#&gt; Loading required package: fastDummies</span>
<span class="co">#&gt; Loading required package: car</span>
<span class="co">#&gt; Loading required package: carData</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'car'</span>
<span class="co">#&gt; The following object is masked from 'package:dplyr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     recode</span>
<span class="co">#&gt; The following object is masked from 'package:purrr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     some</span></code></pre></div>
</div>
<div id="example-on-mtcars-data" class="section level2">
<h2 class="hasAnchor">
<a href="#example-on-mtcars-data" class="anchor"></a>Example on mtcars data</h2>
<p>For the first example, we use mtcars dataset. We want to evaluate <em>x</em>, <em>log(x)</em> with 1 &amp; 3 as its base, <em>logb(x)</em>, <em>power(x)</em> with degrees 3 &amp; 4, <em>poly(x)</em> (polynomial form) with degrees 3 &amp; 4, <em>ns(x)</em> (natural cubic spline form) with 3 degrees of freedom and <em>cut(x)</em> with 3 &amp; 4 partitions as our desired forms on <em>disp</em>, <em>hp</em>, <em>drat</em> &amp; <em>wt</em> as our chosen continuous variables and then we want to obtain the best GAM made out of the obtained best forms of mentioned continuous variables and <em>vs</em> as our only desired categorical variable:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_mtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">%&gt;%</span> <span class="fu">mutate_at</span><span class="op">(</span><span class="st">'vs'</span>,<span class="va">as.factor</span><span class="op">)</span>

<span class="op">(</span><span class="va">cars_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autoGAM_frame.html">autoGAM_frame</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">mpg</span><span class="op">~</span><span class="va">disp</span><span class="op">+</span><span class="va">hp</span><span class="op">+</span><span class="va">drat</span><span class="op">+</span><span class="va">wt</span><span class="op">+</span><span class="va">vs</span>,
                    
                   forms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'identity'</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">'log'</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span>,<span class="st">'logb'</span>,
                                
                                <span class="st">'power'</span><span class="op">=</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span>,<span class="st">'poly'</span><span class="op">=</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span>,<span class="st">'ns'</span><span class="op">=</span><span class="fl">3</span>,<span class="st">'cut'</span><span class="op">=</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,
                   
                   data <span class="op">=</span> <span class="va">my_mtcars</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Warning: autoGAM removed log(disp,1), log(hp,1), log(drat,1), log(wt,1) due to</span>
<span class="co">#&gt; the inclusion of NaN, Inf or -Inf.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Forms evaluation was done in: 1.499888 secs.</span>
<span class="co">#&gt; $`best forms`</span>
<span class="co">#&gt; [1] "poly(disp,3,raw=F)" "cut(drat,4)"        "cut(hp,4)"         </span>
<span class="co">#&gt; [4] "poly(wt,4,raw=F)"  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`final predictors`</span>
<span class="co">#&gt; [1] "poly(disp,3,raw=F)" "cut(drat,4)"        "cut(hp,4)"         </span>
<span class="co">#&gt; [4] "poly(wt,4,raw=F)"   "vs"</span></code></pre></div>
<p>Best forms of continuous predictors and final predictors to be used in the final GAM are the default print outputs but they are part of a bigger list. Try exploring this list by calling different parts of it by <code>cars_frame$</code>.</p>
<p><em>Note: As we can see, autoGAM automatically removes any function (form) that creates <code>NaN</code>, <code>Inf</code> or <code>-Inf</code> on specific predictors and gives out a Warning message on which forms of predictor(s) were removed.</em></p>
<p>All the included functions in the forms list has the form: <em>f(x)</em> or <em>f(x,degree)</em> and they all output a vector or a matrix (As they should!). All of these functions are well known functions from base R or familiar packages (that are included as dependencies of autoGAM) including: <em>identity, log2, logb, log, exp, poly, bs &amp; ns (from splines package), s (from gam package) &amp; cut</em>. Only <em>power</em> function is an exception which is a pre-defined function inside autoGAM. <em>power(x,degree)</em> is simply x^degree.</p>
<p><em>Note: You can always include your own function in the mentioned way if it has the f(x) or f(x,degree) form and it outputs a vector or a matrix. We will get back to this shortly in iris example.</em></p>
<p>‘identity’ (<em>f(x)=x</em>) and <em>logb</em> has the form: <em>f(x)</em> so we can only pass their name (like what we did for ‘logb’) or we can determine that they don’t have degree argument by passing c() in front of their names (like ‘identity’=c()), we call this singular determination. All other functions have the form: <em>f(x,degree)</em> and the desired degrees, degrees of freedom were passed in front of their names.</p>
<p><em>Note: If a hypothetical function g has the form g(x,degree) and you pass it singularly in the forms list (‘g’ or ‘g’=c()), default value for degree in g(x,degree) will be used, otherwise if there is no default value for degree, you will get an error until you determine degree value(s) by passing them in front of ‘g’ name in the forms list.</em></p>
<p>Now that we have our base platform and the best forms of our included continuous predictors, it’s time to fit the best GAM. it can’t be any simpler! just call <code><a href="../reference/autoGAM_fit.html">autoGAM_fit()</a></code> on the created frame:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">cars_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autoGAM_fit.html">autoGAM_fit</a></span><span class="op">(</span><span class="va">cars_frame</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; glm(formula = final_formula, family = family, data = data)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Deviance Residuals: </span>
<span class="co">#&gt;      Min        1Q    Median        3Q       Max  </span>
<span class="co">#&gt; -2.68924  -1.65509   0.02335   1.04505   2.90671  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;                         Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">#&gt; (Intercept)              22.4362     1.6734  13.407 1.81e-10 ***</span>
<span class="co">#&gt; poly(disp, 3, raw = F)1 -14.6151    11.5412  -1.266   0.2225    </span>
<span class="co">#&gt; poly(disp, 3, raw = F)2  10.9831     6.9698   1.576   0.1335    </span>
<span class="co">#&gt; poly(disp, 3, raw = F)3 -10.5256     4.0493  -2.599   0.0187 *  </span>
<span class="co">#&gt; cut(drat, 4)(3.3,3.84]    1.1281     2.2370   0.504   0.6205    </span>
<span class="co">#&gt; cut(drat, 4)(3.84,4.39]   1.1326     2.1907   0.517   0.6118    </span>
<span class="co">#&gt; cut(drat, 4)(4.39,4.93]   1.3703     2.8535   0.480   0.6372    </span>
<span class="co">#&gt; cut(hp, 4)(123,194]      -3.5973     1.6377  -2.197   0.0422 *  </span>
<span class="co">#&gt; cut(hp, 4)(194,264]      -7.8049     2.9773  -2.621   0.0179 *  </span>
<span class="co">#&gt; cut(hp, 4)(264,335]      -6.7004     3.6635  -1.829   0.0850 .  </span>
<span class="co">#&gt; poly(wt, 4, raw = F)1     1.7170     8.7863   0.195   0.8474    </span>
<span class="co">#&gt; poly(wt, 4, raw = F)2    -0.4116     6.7857  -0.061   0.9523    </span>
<span class="co">#&gt; poly(wt, 4, raw = F)3    -3.0134     3.4524  -0.873   0.3949    </span>
<span class="co">#&gt; poly(wt, 4, raw = F)4     2.1585     2.7949   0.772   0.4505    </span>
<span class="co">#&gt; vs1                      -0.5373     1.6504  -0.326   0.7487    </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (Dispersion parameter for gaussian family taken to be 4.617075)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Null deviance: 1126.05  on 31  degrees of freedom</span>
<span class="co">#&gt; Residual deviance:   78.49  on 17  degrees of freedom</span>
<span class="co">#&gt; AIC: 151.52</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Number of Fisher Scoring iterations: 2</span></code></pre></div>
<p>Simple as that. Again this is the print output of <code><a href="../reference/autoGAM_fit.html">autoGAM_fit()</a></code>. Actually the fitted model object was added to the base list created by <code><a href="../reference/autoGAM_frame.html">autoGAM_frame()</a></code>. You can still explore everything by using <code>cars_fit$</code>. For example let’s extract the fitted model object that was added and we saw its summary:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cars_fit</span><span class="op">$</span><span class="va">`final fit`</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:  glm(formula = final_formula, family = family, data = data)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;             (Intercept)  poly(disp, 3, raw = F)1  poly(disp, 3, raw = F)2  </span>
<span class="co">#&gt;                 22.4362                 -14.6151                  10.9831  </span>
<span class="co">#&gt; poly(disp, 3, raw = F)3   cut(drat, 4)(3.3,3.84]  cut(drat, 4)(3.84,4.39]  </span>
<span class="co">#&gt;                -10.5256                   1.1281                   1.1326  </span>
<span class="co">#&gt; cut(drat, 4)(4.39,4.93]      cut(hp, 4)(123,194]      cut(hp, 4)(194,264]  </span>
<span class="co">#&gt;                  1.3703                  -3.5973                  -7.8049  </span>
<span class="co">#&gt;     cut(hp, 4)(264,335]    poly(wt, 4, raw = F)1    poly(wt, 4, raw = F)2  </span>
<span class="co">#&gt;                 -6.7004                   1.7170                  -0.4116  </span>
<span class="co">#&gt;   poly(wt, 4, raw = F)3    poly(wt, 4, raw = F)4                      vs1  </span>
<span class="co">#&gt;                 -3.0134                   2.1585                  -0.5373  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees of Freedom: 31 Total (i.e. Null);  17 Residual</span>
<span class="co">#&gt; Null Deviance:       1126 </span>
<span class="co">#&gt; Residual Deviance: 78.49     AIC: 151.5</span></code></pre></div>
<p>As you saw, we first created the base platform and evaluated our desired forms of continuous predictors in it and then fitted the GAM by using the best forms of continuous predictors and our one categorical predictor. What if we wanted all the insignificant predictors in the last outpur gone? Again it can’t be any easier. Just call <code><a href="../reference/backward_select.html">backward_select()</a></code> function on the base platform then fit the final GAM by <code><a href="../reference/autoGAM_fit.html">autoGAM_fit()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">cars_backward_fit</span> <span class="op">&lt;-</span> <span class="va">cars_frame</span> <span class="op">%&gt;%</span> 
   
   <span class="fu"><a href="../reference/backward_select.html">backward_select</a></span><span class="op">(</span>backward.alpha<span class="op">=</span><span class="fl">.1</span>,backward.test<span class="op">=</span><span class="st">'Rao'</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   
   <span class="va">autoGAM_fit</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; glm(formula = final_formula, family = family, data = data)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Deviance Residuals: </span>
<span class="co">#&gt;      Min        1Q    Median        3Q       Max  </span>
<span class="co">#&gt; -3.11983  -1.16499   0.05868   1.43673   2.66941  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;                         Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">#&gt; (Intercept)              22.3680     0.7316  30.576  &lt; 2e-16 ***</span>
<span class="co">#&gt; poly(disp, 3, raw = F)1 -16.5277     3.7439  -4.415  0.00017 ***</span>
<span class="co">#&gt; poly(disp, 3, raw = F)2   9.9757     2.2816   4.372  0.00019 ***</span>
<span class="co">#&gt; poly(disp, 3, raw = F)3 -10.7006     1.9112  -5.599 7.98e-06 ***</span>
<span class="co">#&gt; cut(hp, 4)(123,194]      -2.9287     1.1174  -2.621  0.01471 *  </span>
<span class="co">#&gt; cut(hp, 4)(194,264]      -6.4395     1.7815  -3.615  0.00132 ** </span>
<span class="co">#&gt; cut(hp, 4)(264,335]      -4.9531     2.2178  -2.233  0.03471 *  </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (Dispersion parameter for gaussian family taken to be 3.552615)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Null deviance: 1126.047  on 31  degrees of freedom</span>
<span class="co">#&gt; Residual deviance:   88.815  on 25  degrees of freedom</span>
<span class="co">#&gt; AIC: 139.48</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Number of Fisher Scoring iterations: 2</span></code></pre></div>
<p>From the output we can see that backward elimination was done. The sequential details of this backward process were also added to the list from autoGAM_frame. let’s check it out:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cars_backward_fit</span><span class="op">$</span><span class="va">`backward info`</span>
<span class="co">#&gt; $step0</span>
<span class="co">#&gt;                        Df  Deviance      AIC scaled Rao sc.   Pr(&gt;Chi)</span>
<span class="co">#&gt; poly(disp, 3, raw = F)  3 127.11898 160.9525     10.5323626 0.01454296</span>
<span class="co">#&gt; cut(drat, 4)            3  79.87272 146.0824      0.2994191 0.96013770</span>
<span class="co">#&gt; cut(hp, 4)              3 112.58882 157.0683      7.3853130 0.06057964</span>
<span class="co">#&gt; poly(wt, 4, raw = F)    4  85.85985 146.3954      1.5961573 0.80948262</span>
<span class="co">#&gt; vs                      1  78.97962 149.7226      0.1059860 0.74476113</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`step1: removed cut(drat, 4) [Pr(&gt;Chi) = 0.9601]`</span>
<span class="co">#&gt;                        Df  Deviance      AIC scaled Rao sc.    Pr(&gt;Chi)</span>
<span class="co">#&gt; poly(disp, 3, raw = F)  3 130.58149 155.8124     12.6973953 0.005338874</span>
<span class="co">#&gt; cut(hp, 4)              3 125.94498 154.6556     11.5364218 0.009152265</span>
<span class="co">#&gt; poly(wt, 4, raw = F)    4  88.81200 141.4772      2.2383824 0.692008743</span>
<span class="co">#&gt; vs                      1  80.98379 144.5245      0.2782113 0.597876021</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`step2: removed poly(wt, 4, raw = F) [Pr(&gt;Chi) = 0.692]`</span>
<span class="co">#&gt;                        Df  Deviance      AIC scaled Rao sc.     Pr(&gt;Chi)</span>
<span class="co">#&gt; poly(disp, 3, raw = F)  3 359.41473 180.2118   7.312599e+01 9.134616e-16</span>
<span class="co">#&gt; cut(hp, 4)              3 136.49324 149.2293   1.288508e+01 4.891831e-03</span>
<span class="co">#&gt; vs                      1  88.81537 139.4784   9.115434e-04 9.759141e-01</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`step3: removed vs [Pr(&gt;Chi) = 0.9759]`</span>
<span class="co">#&gt;                        Df Deviance      AIC scaled Rao sc.     Pr(&gt;Chi)</span>
<span class="co">#&gt; poly(disp, 3, raw = F)  3 380.2083 180.0115       82.02211 1.130401e-17</span>
<span class="co">#&gt; cut(hp, 4)              3 138.4360 147.6816       13.96734 2.949949e-03</span></code></pre></div>
<p>Now nothing gathers up information in one place better than a good plot. plot method for <code>autoGAM_frame</code> was designed to create plots related to evaluation of different forms of continuous predictors and to create final forms of included continuous predictors.</p>
<p><em>Note that plot can be called on any object with the <code>autoGAM_frame</code> base.</em></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">cars_frame</span>,type<span class="op">=</span><span class="st">'forms'</span><span class="op">)</span></code></pre></div>
<p><img src="autoGAM_files/figure-html/unnamed-chunk-7-1.png" width="690" style="display: block; margin: auto;"></p>
<p>The plot above was a bit crowded, wasn’t it? It’s always good to see a formal plot for final best form of each continuous predictor that was included in the final GAM.</p>
<p>Based on full model:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">cars_fit</span>,type<span class="op">=</span><span class="st">'final'</span><span class="op">)</span></code></pre></div>
<p><img src="autoGAM_files/figure-html/unnamed-chunk-8-1.png" width="690" style="display: block; margin: auto;"></p>
<p>Based on reduced model after backward elimination process:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">cars_backward_fit</span>,type<span class="op">=</span><span class="st">'final'</span><span class="op">)</span></code></pre></div>
<p><img src="autoGAM_files/figure-html/unnamed-chunk-9-1.png" width="690" style="display: block; margin: auto;"></p>
<p>Now that we have the general idea about how autoGAM works, it’s time to wrap everything up by mentioning final details in the form of an example.</p>
</div>
<div id="example-on-iris-data" class="section level2">
<h2 class="hasAnchor">
<a href="#example-on-iris-data" class="anchor"></a>Example on iris data</h2>
<p>This time we are interested in evaluation of two completely random functions that one of them has a vector output and the other one has a matrix output.</p>
<p>We first perform some modifications on iris data and then we introduce our desired functions:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">my_iris</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span>
   
   <span class="va">as_tibble</span> <span class="op">%&gt;%</span> <span class="fu">mutate_at</span><span class="op">(</span><span class="st">'Species'</span>,<span class="va">as.character</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 100 x 5</span>
<span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span class="co">#&gt;           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  </span>
<span class="co">#&gt;  1          5.1         3.5          1.4         0.2 setosa </span>
<span class="co">#&gt;  2          4.9         3            1.4         0.2 setosa </span>
<span class="co">#&gt;  3          4.7         3.2          1.3         0.2 setosa </span>
<span class="co">#&gt;  4          4.6         3.1          1.5         0.2 setosa </span>
<span class="co">#&gt;  5          5           3.6          1.4         0.2 setosa </span>
<span class="co">#&gt;  6          5.4         3.9          1.7         0.4 setosa </span>
<span class="co">#&gt;  7          4.6         3.4          1.4         0.3 setosa </span>
<span class="co">#&gt;  8          5           3.4          1.5         0.2 setosa </span>
<span class="co">#&gt;  9          4.4         2.9          1.4         0.2 setosa </span>
<span class="co">#&gt; 10          4.9         3.1          1.5         0.1 setosa </span>
<span class="co">#&gt; # ... with 90 more rows</span></code></pre></div>
<p>We filtered iris to only have the information of <em>setosa &amp; versicolor Species</em>. So our version of iris (dat) has all numerical predictors and a categorical response with 2 levels (<em>Species</em>).</p>
<p>Now we introduce our forms (functions) to be evaluated on our predictors</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">temp_vec</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">3</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">+</span><span class="fl">5</span>

<span class="va">temp_mat</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">d</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">as.list</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">d</span><span class="op">)</span><span class="op">*</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">map</span><span class="op">(</span><span class="op">~</span><span class="va">x</span><span class="op">^</span><span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">reduce</span><span class="op">(</span><span class="va">cbind</span><span class="op">)</span></code></pre></div>
<p>Both of these specified functions have <em>f(x)</em> or <em>f(x,degree)</em> form and their outputs are either a vector or a matrix so they can be used in the list of forms argument.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autoGAM_frame.html">autoGAM_frame</a></span><span class="op">(</span>formula<span class="op">=</span><span class="va">Species</span><span class="op">~</span><span class="va">.</span>,
                          
                          data<span class="op">=</span><span class="va">my_iris</span>,
                          
                          forms<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'temp_vec'</span>,<span class="st">'temp_mat'</span><span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,
                          
                          family<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">'logit'</span><span class="op">)</span>,
                          
                          metric<span class="op">=</span><span class="st">'AICc'</span>,
                          
                          parallel<span class="op">=</span><span class="cn">T</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="va">autoGAM_fit</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Forms evaluation was done in: 14.45891 secs.</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">iris_fit</span>,type<span class="op">=</span><span class="st">'forms'</span><span class="op">)</span></code></pre></div>
<p><img src="autoGAM_files/figure-html/unnamed-chunk-13-1.png" width="690" style="display: block; margin: auto;"></p>
<p>One last thing! You saw that base category of the <em>Species</em> variable was chosen to be setosa. This is because by default the first category of the response will become the base. There’s no difference in how the model is going to predict but one might want to change this base for the sake of interpretation. For example what if we wanted versicolor as the base category of the response? We can easily set base category of response with resp.base argument.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autoGAM_frame.html">autoGAM_frame</a></span><span class="op">(</span>formula<span class="op">=</span><span class="va">Species</span><span class="op">~</span><span class="va">.</span>,
                          
                            data<span class="op">=</span><span class="va">my_iris</span>,
                          
                            forms<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'temp_vec'</span>,<span class="st">'temp_mat'</span><span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,
                          
                            family<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">'logit'</span><span class="op">)</span>,
                          
                            metric<span class="op">=</span><span class="st">'AICc'</span>,
                          
                            parallel<span class="op">=</span><span class="cn">T</span>,
                          
                            resp.base<span class="op">=</span><span class="st">'versicolor'</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Forms evaluation was done in: 11.48609 secs.</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">iris_frame</span>,type<span class="op">=</span><span class="st">'forms'</span><span class="op">)</span></code></pre></div>
<p><img src="autoGAM_files/figure-html/unnamed-chunk-14-1.png" width="690" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">iris_frame</span><span class="op">)</span></code></pre></div>
<p><img src="autoGAM_files/figure-html/unnamed-chunk-14-2.png" width="690" style="display: block; margin: auto;"></p>
</div>
<div id="backward_select-as-a-separate-function" class="section level2">
<h2 class="hasAnchor">
<a href="#backward_select-as-a-separate-function" class="anchor"></a>backward_select() as a separate function</h2>
<p>From update (1.0.0) that came with total rebuild of the package’s structure, <code><a href="../reference/backward_select.html">backward_select()</a></code> became an independent function so it can act as a function on <code>autoGAM_frame</code> objects to match the new workflow based structure. A valuable side effect of this independence is that this function can also act as an independent function for only backward selection procedures based on formula inputs. In technical form, <code>object</code> argument can be both a formula or an object of class <code>autoGAM_frame</code> to participate in autoGAM’s workflow. The usage is pretty easy and straightforward but let’s check out an example:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/backward_select.html">backward_select</a></span><span class="op">(</span>object<span class="op">=</span><span class="va">mpg</span><span class="op">~</span><span class="va">hp</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span><span class="op">(</span><span class="va">disp</span>,<span class="fl">2</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">drat</span>,<span class="fl">3</span><span class="op">)</span><span class="op">+</span><span class="va">vs</span>,data<span class="op">=</span><span class="va">my_mtcars</span><span class="op">)</span>
<span class="co">#&gt; $step0</span>
<span class="co">#&gt;               Df Deviance      AIC scaled dev.    Pr(&gt;Chi)</span>
<span class="co">#&gt; hp             1 177.3535 159.6092  0.05513119 0.814363717</span>
<span class="co">#&gt; poly(disp, 2)  2 274.0842 171.5385 13.98442936 0.000919009</span>
<span class="co">#&gt; cut(drat, 3)   2 222.5434 164.8724  7.31839905 0.025753119</span>
<span class="co">#&gt; vs             1 178.3336 159.7855  0.23148621 0.630424008</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`step1: removed hp [Pr(&gt;Chi) = 0.8144]`</span>
<span class="co">#&gt;               Df Deviance      AIC scaled dev.     Pr(&gt;Chi)</span>
<span class="co">#&gt; poly(disp, 2)  2 426.7211 183.7047  28.0955479 7.927373e-07</span>
<span class="co">#&gt; cut(drat, 3)   2 232.9316 164.3324   8.7232019 1.275795e-02</span>
<span class="co">#&gt; vs             1 179.1663 157.9346   0.3254306 5.683622e-01</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`step2: removed vs [Pr(&gt;Chi) = 0.5684]`</span>
<span class="co">#&gt;               Df Deviance      AIC scaled dev.     Pr(&gt;Chi)</span>
<span class="co">#&gt; poly(disp, 2)  2 678.2967 196.5352   42.600650 5.615474e-10</span>
<span class="co">#&gt; cut(drat, 3)   2 233.3932 162.3957    8.461117 1.454426e-02</span></code></pre></div>
<p>The detailed information of the sequential backward elimination process will be returned directly. When <code>object</code> is an object of class <code>autoGAM_frame</code> instead of a formula, the above list will be added to the final frame list as we saw earlier.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Shahin Roshani.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
